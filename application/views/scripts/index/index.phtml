<?php
$isSignedIn = false;
?>

<div id="wrapper">
        <?php if(isset($this->message)) :?>
            <div class="notification alert alert-danger">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                <?php echo $this->message;?>
            </div>
        <?php endif;?>
    <div id="sidebar-wrapper">
        <div class="sidebar-nav nav" id="sidebar-nav">
            <ul id="sidebar-icons">
                <li>
                    <?php
                    if ($this->isSignedIn) {
                        echo "<a href='" . $this->baseUrl() . "/index/sign-out'>
                            <span class='fa fa-sign-out'></span></a>";
                    } else {
                        echo "<a href='#signIn' data-toggle='tab'>
                            <span class='menu-open fa fa-sign-in'></span></a>";
                    }
                    ?>
                </li>
                <li><a href="#signUp" data-toggle="tab"><span class="menu-open fa fa-user"></span></a></li>
                <li><a href="#" data-toggle="tab"><span class="fa fa-cogs"></span></a></li>
                <li><a href="#about" data-toggle="tab"><span class="menu-open fa fa-info-circle"></span></a></li>
                <li><a href="#" id="menu-close" data-toggle="tab"><span class="fa fa-close"></span></a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane" id="signIn">
                    <h3>Sign in</h3>
                    <div class="forms">
                        <?php
                        echo $this->signInForm;
                        ?>
                        <h4>Don't have an account?<br>Sign up by clicking the
                            <span class="menu-open fa fa-user"></span> on the sidebar.</h4>
                        <h4>Or Sign in with</h4>
                        <div class="fb-login-button" data-size="medium" data-show-faces="false"
                             data-auto-logout-link="true"></div>
                        <div id="facebookLogin">
                        </div>
                        <div class="g-signin2" data-onsuccess="onSignIn"></div>
                        <h3></h3>
                    </div>
                </div>
                <div class="tab-pane" id="signUp">
                    <h3>Sign up</h3>
                    <div class="forms">
                        <?php echo $this->signUpForm; ?>
                    </div>
                </div>
                <div class="tab-pane" id="about">
                    <h3>About</h3>
                    <p>
                        Universe is a Web Portal application. Designed to get your Mails, News,
                        Social Media, Weather Reporting, Maps and more.<br>All in one place.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id='GImage'></div>
    <div id='GName'></div>
    <!-- <div class="g-signin2" data-onsuccess="onSignIn"></div> -->
    <div id = 'g-signout'></div>

    <div class="row">
        <div class="col-md-4">
            <h1>Hi! <?php echo $this->firstName; ?> Great to see You.</h1>
        </div>
        <div class="col-md-8">
            <?php echo $this->webSearchForm; ?>
        </div>
    </div>
    <!--Gmail Widget-->
    <div class="row">
        <div class="col-md-4">
            <div id="gMailWidget" class="widgets">
                <div id="gMailHeader">
                   <!--  <span class='fa fa-google fa-2x'> -->
                    <h2>G-Mail</h2>
                    <label>
                        <?php
                            echo "<a href='https://www.gmail.com' target='_blank'>
                            <span class='fa fa-external-link'></span></a>";
                            echo "<a href='" . $this->baseUrl() . "/index/gmail-refresh'>
                            <span class='fa fa-refresh'></span></a>";
                        ?>
                    </label>
                </div>
                <div id="gMailBody">

                        <!--Gmail-->
                        <div class='gmail-div'>
                          <a href="#compose-modal" data-toggle="modal" id="compose-button" class="btn btn-primary hidden">Compose</a>
                          <button id="authorize-button" class="btn btn-primary hidden">Gmail</button>
                          <div class="mail-table table-responsive">
                            <table class="table-hover table table-inbox hidden">
                              <thead>
                                <tr>
                                  <th>From</th>
                                  <th>Subject</th>
                                  <th>Date/Time</th>
                                </tr>
                              </thead>
                              <tbody></tbody>
                            </table>
                          </div>
                        </div>

                        <!--This model is to compose a mail-->
                        <div class="modal fade" id="compose-modal" tabindex="-1" role="dialog">
                          <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title">Compose</h4>
                              </div>
                              <form onsubmit="return sendEmail();">
                                <div class="modal-body">
                                  <div class="form-group">
                                    <input type="email" class="form-control" id="compose-to" placeholder="To" required />
                                  </div>

                                  <div class="form-group">
                                    <input type="text" class="form-control" id="compose-subject" placeholder="Subject" required />
                                  </div>

                                  <div class="form-group">
                                    <textarea class="form-control" id="compose-message" placeholder="Message" rows="10" required></textarea>
                                  </div>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                  <button type="submit" id="send-button" class="btn btn-primary">Send</button>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>

                        <!--This model is to replay the mail in the inbox-->
                        <div class="modal fade" id="reply-modal" tabindex="-1" role="dialog">
                          <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title">Reply</h4>
                              </div>
                              <form onsubmit="return sendReply();">
                                <input type="hidden" id="reply-message-id" />

                                <div class="modal-body">
                                  <div class="form-group">
                                    <input type="text" class="form-control" id="reply-to" disabled />
                                  </div>

                                  <div class="form-group">
                                    <input type="text" class="form-control disabled" id="reply-subject" disabled />
                                  </div>

                                  <div class="form-group">
                                    <textarea class="form-control" id="reply-message" placeholder="Message" rows="10" required></textarea>
                                  </div>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                  <button type="submit" id="reply-button" class="btn btn-primary">Send</button>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>
                </div>
            </div>
        </div>
        <!--facebook Widget-->
        <div class="col-md-4">
            <div id="facebookWidget" class="widgets">
                <div id="facebookHeader">
                    <h2>Facebook</h2>
                    <label>
                        <?php
                        echo "<a href='" . $this->baseUrl() . "/index/facebook-refresh'>
                        <span class='fa fa-refresh'></span></a>";
                        ?>
                    </label>
                </div>
                <div id="facebookBody">
                    <?php echo $this->facebookData; ?>
                </div>
            </div>
        </div>
        <!--Twitter Widget-->
        <div class="col-md-4">
            <div id="twitterWidget" class="widgets">
                <div id="twitterHeader">
                    <!-- <span class='fa fa-twitter widget-icon fa-2x'> -->
                    <h2>Twitter</h2>
                    <label>
                    <?php
                        echo "<a href='https://twitter.com' target='_blank'>
                                <span class='fa fa-external-link'></span></a>";
                        echo "<a href='" . $this->baseUrl() . "/index/twitter-refresh'>
                            <span class='fa fa-refresh'></span></a>";
                    ?>
                    </label>
                </div>
                <div id="twitterBody">
                    <?php echo $this->twitterData; ?>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div id="youtubeWidget" class="widgets">
                <div id="youtubeHeader">
                    <!-- <span class='fa widget-icon fa-youtube-play fa-2x'></span> -->
                    <h2>youtube</h2>
                    <label>
                        <?php
                        echo "<a href='https://www.youtube.com' target='_blank'>
                            <span class='fa fa-external-link'></span></a>";
                        echo "<a href='" . $this->baseUrl() . "/index/youtube-refresh'>
                            <span class='fa fa-refresh'></span></a>";
                        ?>
                    </label>
                </div>
                <div id="youtubeBody">
                    <form id="youtube-form" action="#">
                        <div class="col-md-10">
                            <p>
                                <input type="text" id="search" placeholder="Type something..."autocomplete="off" class="form-control" />
                            </p>
                        </div>
                        <div class="col-md-2">
                            <p>
                                <button id="authorize-youtube-button" type="submit" value="Search" class="form-control youtube-btn btn btn-primary w100" onclick="handleYoutubeAuthClick(event)">Search</button>
                            </p>
                        </div>
                    </form>
                    <div id="youtube-results"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div id="googleMapWidget" class="landscapeWidgets">
                <div id="googleMapHeader">
                    <h2>Google Map</h2>
                    <input id="pac-input" class="controls" type="text" placeholder="Search Box">
                </div>
                <div id="googleMap">
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3">
            <div id="weatherWidget" class="landscapeWidgets">
                <div id="weatherHeader">
                    <h2>Weather</h2>
                    <label>
                        <?php
                        echo "<a href='" . $this->baseUrl() . "/index/twitter-refresh'>
                        <span class='fa fa-refresh'></span></a>";
                        ?>
                    </label>
                </div>
                <div id="weatherBody">
                    <div id="weather">
                        <ul id="scroller">
                            <!-- The forecast items will go here -->
                        </ul>
                        <a href="#" class="arrow previous">Previous</a>
                        <a href="#" class="arrow next">Next</a>
                        <p class="location"></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div id="weatherWidget" class="landscapeWidgets">
                <div id="weatherHeader">
                    <h2>News</h2>
                    <label>
<!--                        --><?php
//                        echo "<a href='" . $this->baseUrl() . "/index/twitter-refresh'>
//                        <span class='fa fa-refresh'></span></a>";
//                        ?>
                    </label>
                </div>
                <div id="newsBody">
                    <?php
                    echo $this->newsForm
                    ?>
                    <div id="body">
                        <div id="feedControl">Loading...</div>
                    </div>
                </div>
            </div>
        </div>
        <!--Live cricket score-->
        <div class="col-md-6">
            <div id="twitterWidget" class="widgets">
                <div id="twitterHeader">
                    <!-- <span class='fa fa-twitter widget-icon fa-2x'> -->
                    <h2>Live Cricket Score</h2>
                    <label>
                    <?php
                        echo "<a href='https://twitter.com' target='_blank'>
                                <span class='fa fa-external-link'></span></a>";
                        echo "<a href='" . $this->baseUrl() . "/index/twitter-refresh'>
                            <span class='fa fa-refresh'></span></a>";
                    ?>
                    </label>
                </div>
                <div id="cricketBody">
                   <div id="liveRefresh">
                        <?php
                        error_reporting(0);
                        $content=file_get_contents("http://cricscore-api.appspot.com/csa");
                        $array = json_decode($content,true);
                        ?>
                        <div id='liveScore'>
                            <?php 
                            $u=$array[1]['id']; 
                            ?>
                        </div>
                        <?php
                        echo '<br/>';
                        $content=file_get_contents("http://cricscore-api.appspot.com/csa?id=$u");
                        $array = json_decode($content,true);
                        echo '<h3><font color="#33ccff">Live Match</font> :</h3> ';
                        echo '<h4>';
                        echo $array[0]['de'];
                        echo '</h4>';
                        $u=$array[0]['de'];
                        /*header('Refresh:10;URL=index.php');*/
                        ?>
                        <h4>Last Match Winner</h4>
                        <?php
                        $rss = simplexml_load_file('http://static.cricinfo.com/rss/livescores.xml');
                        $i = 0;
                        foreach ($rss->channel->item as $item) {
                            echo '<div class="line">';
                            //echo "<p id='allMatches'>" . $item->description . "</p>";
                            echo "<a class='scoreLink' href =". $i .">". $item->description ."</a>";
                            echo '</div>';
                            $i++;
                        }
                        ?>
                    </div>
                </div>
            </div>
        </div>
</div>
